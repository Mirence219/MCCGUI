# MCCGUI - Minecraft Console Client 图形化管理工具
MCCGUI 是 Minecraft Console Client（MCC）的可视化管理界面，旨在简化 MCC 账户管理、假人启动/控制、服务器交互等操作，解决原生 MCC 纯命令行操作的痛点，同时提供丰富的个性化配置和稳定性优化。

## ✨ 核心功能
1. **账户管理**：支持离线/正版登录，账户增删改查、密码加密存储、配置文件独立管理；
2. **MCC 控制**：多进程启动/重连/退出，掉线自动重连，假人重生，消息/命令发送；
3. **实时监听**：多线程监听 MCC 输出，彩色消息显示，日志持久化，窗口置顶/单例控制；
4. **状态监控**：假人存活/生命值/经验等状态展示，服务器连通性检测；
5. **个性化配置**：常规/高级双维度配置，端口自定义，ANSI 样式显示，日志/缓存策略定制；
6. **稳定性优化**：子进程闭环管理、内存泄漏修复、异常自动处理。

## 📌 注意事项
1. 系统兼容：仅支持 Windows 系统（已修复发布版本子进程创建问题）；
2. 数据安全：第三方认证账户密码采用双向加密存储，建议定期更换密码，切勿泄露配置文件/数据库；
3. 日志管理：日志文件随账户启动生成、关闭释放，如需备份请手动复制；
4. 进程管控：强制关闭主程序前，建议先手动退出所有 MCC 进程，避免残留进程占用资源；
5. 依赖说明：需安装 Python 3.12+ 及对应依赖（TOML 库、正则库、多线程/多进程相关库）。

## 🚀 快速开始
1. 下载并解压 MCCGUI 发布包；
2. 运行主程序，在「添加账户」界面填写服务器、登录方式等信息；
3. 选择账户点击「启动」，打开控制窗口即可发送消息/查看假人状态；
4. 如需高级配置，在账户编辑界面进入「高级设置」调整 MCC 参数。

## 📝 版本更新日志
### v0.7（最新）
#### 新增功能
1. **登录方式优化**
   - 新增离线登录方式：支持自定义离线账户登录服务器；
   - 优化正版登录方式：正版账户首次启动跳转浏览器登录，开启会话缓存后仅需登录一次（保护用户数据安全）；
2. **控制窗口升级**
   - 新增彩色消息显示：解析 MCC 的 ANSI 转义符，监听窗口可显示游戏内带颜色/样式的消息；
   - 监听窗口背景改为黑色，适配彩色信息显示；
3. **账户编辑/添加窗口增强**
   - 拆分设置项：原账户信息归为「常规设置」，新增服务器/认证服务器端口自定义（留空自动解析）；
   - 新增「高级设置」：支持配置 MCC 更多高级参数；
   - 账户信息保护：编辑账户时密码栏默认清空（留空表示不修改密码），不再显示历史密码。

#### 优化内容
1. 重构代码结构，提升可读性和维护性；
2. 改用数据库存储账户数据，替代原文件存储方式；
3. 第三方认证账户密码采用双向加密存储（注：无法保证绝对安全）；
4. 日志存储保留 ANSI 转义符，重新打开控制窗口可恢复消息样式；
5. 改用专用 TOML 库读写 MCC 配置文件，解决类型不匹配、反序列化错误；
6. 编辑窗口类继承添加账户窗口类，减少代码冗余；
7. 账户共用一个 MCC 程序本体，仅生成独立配置文件，降低磁盘占用；
8. 删除账户时自动清理对应配置文件；
9. 关闭账户后自动清空配置文件中的密码字段，保护账户信息；
10. 日志文件按账户启动/关闭生命周期管理（启动重建、关闭释放）。

#### 修复内容
1. 修复控制窗口打开时，启动/重连 MCC 后无法交互的问题（假人状态接收、消息发送失败）；
2. 修复进入服务器时账户状态异常显示的问题。

### v0.6.4
1. 新增服务器连通性检测：账户信息界面显示认证服务器/游戏服务器的延迟、超时、未知主机等状态；
2. 主页新增「刷新」按钮：点击重新执行连通性测试并更新状态。

### v0.6.3
1. 修复多场景下子进程未正确关闭的问题（强制关闭 MCC、重连、关闭主程序等）；
2. 监听窗口/日志新增 `[MCCGUI]` 开头的调试信息。

### v0.6.2
1. 修复 Windows 发布版本中 MCC 子进程无法正确创建的问题；
2. 隐藏发布版本中 MCC 自带的命令行窗口；
3. 设计并添加 MCCGUI 初代图标。

### v0.6.1
1. 新增消息缓存功能：缓存发送过的消息/命令，按「↑/↓」快速调取（程序关闭后清空）；
2. 重新打开已关闭的控制窗口时，滚动条自动跳至最下方；
3. 修复重连/退出游戏后假人状态不更新的问题（离线时状态显示为「未知」）。

### v0.6
1. 新增重生功能：假人死亡时「重生」按钮激活，点击可触发重生；
2. 新增假人状态显示窗口：展示存活状态、生命值、饥饿值、经验值/等级；
3. 优化报错退出逻辑：改用 MCC 自带的报错关闭进程机制；
4. 重连按钮优化：仅进程运行时可点击，避免无效操作。

### v0.5.1
1. 控制窗口回车发送消息，提升操作便捷性；
2. 发送消息后监听窗口滚动条自动移至最低处；
3. 打开监听窗口时自动聚焦到消息输入框。

### v0.5
1. 新增掉线自动重连：仅在线期间掉线触发，重试若干次失败后关闭进程（启动时连接失败不触发）；
2. 控制界面新增「重连」按钮：点击直接重启 MCC；
3. 优化监听窗口滚动逻辑：滚动条在底部时自动显示新消息，否则保持位置；
4. 内存优化：重启 MCC 时强制关闭同名未退出的旧进程。

### v0.4.3
1. 修复控制窗口「启动」按键功能，确保正常触发 MCC 启动；
2. 区分 MCC 输出类型：报错输出、普通输出、服务器消息；
3. MCC 报错后立即关闭对应进程，避免资源泄漏。

### v0.4.2
1. 修复反复打开窗口导致的内存泄漏问题；
2. 监听内容输出到日志文件并持久化保存；
3. 控制窗口新增控制栏（启动/退出键，预留扩展位）；
4. 监听窗口升级为「控制窗口」：关闭窗口后仍后台监听，重新打开可恢复历史日志+离线期间的新内容；
5. 禁用无效发送：MCC 未启动/消息为空时，发送按钮不可用。

### v0.4.1
1. 监听窗口支持独立打开，且不阻塞主窗口操作；
2. 账户监听窗口单例限制：已打开时重新调用会置顶并聚焦窗口；
3. 支持同时打开多个账户的监听窗口；
4. 过滤 MCC 输出中的 ANSI 转义符，避免乱码。

### v0.4
1. 改用多线程监听 MCC 输出，避免界面卡顿；
2. 发送功能升级为输入输出一体化窗口：支持发送消息/命令，同时实时查看 MCC 输出（含服务器消息）。

### v0.3.1
1. 操作权限管控：仅 MCC 未启动时可编辑/删除账户，仅启动后可发送消息；
2. 异常处理：MCC 子进程非手动关闭时，自动同步状态并禁用相关按键。

### v0.3
1. 改用多进程启动 MCC，解决文本输入失效问题；
2. 实现向服务器发送命令/消息的功能；
3. 界面文字全量替换为中文，提升易用性。

### v0.2
- 实现账户信息编辑功能（修改账户名称、服务器、密码等）。

### v0.1
- 基础功能：账户的添加、删除，以及通过 MCCGUI 启动账户对应的 MCC 进程。

